---
title: "多实例"
date: 2020-02-06T11:05:55+08:00
draft: false
weight: 35
---

这里说的多实例不是说同时运行多个服务器，而是v1.8.9+添加的同时运行多个V2RayGCon图形界面实例功能。  
双击V2RayGCon.exe时，默认使用当前目录下的userSettings.json作为配置文件。然后可以通过命令行参数开更多实例。假设软件安装在c:\vgc\V2RayGCon.exe，那么在cmd执行以下命令：
```bash
c:
cd c:\vgc\
V2RayGCon.exe -s="us2.json" -t="233"
```
`-s="us2.json"` 表示使用当前目录下的us2.json作为配置文件。通过指定完整路径使用其他目录的配置文件也可以。  
`-t="233"` 表示给当前实例添加一个标记。托盘图标会显示标记的第一个字符，几个主要窗口的标题也会显示标记内容，方便区分当前操作的是哪个实例。  
`-h` 显示帮助信息。    

显然没多少人喜欢打命令，所以更简单的用法是创建一个快捷方式，然后修改“目标”。注意不要改“起始位置”。  
{{< figure src="../../images/forms/mul_instance_lnk.png" >}}  


除了命令行参数外，还有一种开多个实例的方法是把整个vgc目录复制一份到其他位置然后运行。这种方式v1.8.9+也可以运行起来，但是不建议这么做。主要原因是这样复制后假设你想添加一个core，那么两边都要复制一次。或者修改一下NeoLuna的模块文件，又得两边一起修改。  

##### 注意事项
 * ProxySetter插件只在一个实例启用就好，不然同时修改系统设置会导致系统配置混乱
 * 特别注意！tun模式只可以开一个！
 * 多实例功能只支持“便携模式”，如果其中一个实例不是运行在“便携模式”下，可能导致配置丢失
 * 不要玩路径穿越。比如一个实例用`-s="us3.json"`，另一个实例用`-s="../vgc/us3.json"`，我也不知道会发生什么
 * 更新V2RayGCon前需要手动退出其他实例，只保留一个实例
 * 更新core前需要停止其他所有实例的服务器，否则会出现文件被占用无法写入

暂时想到这么多，欢迎补充。  